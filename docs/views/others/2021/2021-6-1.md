---
title: 【2021-06】打卡
date: 2021-06-01
categories: 其他
tags:
 - 打卡
---

## 6.9

js数据类型：

`number`、`boolean`、`string`、`object`、`undefined`、`null`、`symbol`、`bigint`

`symbol`和`bigint`日常使用场景还挺少的，`bigint`适用用大数运算，`symbol`想到的是作为`private key`

判断数据类型的方法：

1. `typeof`：适用于基本类型

```ts
typeof null === 'object'; // true
typeof NaN === 'number'; // true
typeof function() {} === 'function'; // true
```

2. `instanceof`：适用于对象

```ts
/\./ instanceof RegExp; // true
```

## 6.8

第一次做核酸检测，捅了喉咙，着实难受::joy::

用proxy实现`defineProperty`

```ts
let data = {
    name: 'x'
};

let newData = new Proxy(data, {
    get(target, key) {
        return target[key];
    },
    set(obj, prop, value) {
        return obj[prop] = value;
    }
});

```

## 6.7

`Object.defineProperty`的缺点：

1. 无法监听对象非已有属性的添加和已有属性的删除
2. 数组变异，不能通过属性或者索引控制数组

可以通过`$set`解决

## 6.6

写一个深拷贝函数：
```ts
function deepClone(data: any) {
    if (typeof data !== 'object' || data === null) {
        return data;
    }
    let isArray = Array.isArray(data);
    let newData: { [index: string]: any } = isArray ? [] : {};
    Object.keys(data).forEach((key: string) => {
        newData[key] = typeof data[key] === 'object' ? deepClone(data[key]) : data[key];
    });
    return newData;
}
```

`defineProperty`与`proxy`的区别

`defineProperty`：

用法：`Object.defineProperty(obj, prop, descriptor)`

```ts
let a = {};
Object.defineProperty(a, 'name', {
    configurable: false, // 属性是否能被删除
    enumerable: false, // 是否出现在对象的枚举属性中
    writable: false, // 值是否能被改变
    value: 'hahha'
});
```

Vue相应式原理demo：

```ts
let data = {
    name: 'x'
};

let keys = Object.keys(data);
keys.forEach(key => {
    let value = data[key];
    Object.defineProperty(data, key, {
        get() {
            return value;
        },
        set(newVal: string) {
            return value = newVal;
        }
    });
});
```

上面不能对数组生效，因此Vue对 'push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'进行了重写

```ts
let arrayProto = Array.prototype;
let arrayMethods = Object.create(arrayProto);
let method = 'push'; // 这里应该是7种操作数据的写法，这里只列举一种
let original = arrayProto[method];

Object.defineProperty(arrayMethods, method, {
    writable: true,
    enumerable: false,
    configurable: true,
    value () {
        let args = [],
            len = arguments.length;
        while (len--) {
            args[len] = arguments[len];
        }        
        return original.apply(this, args);
    }
});

// Vue中会对数据中的数据修改其原型实现改写目的
let data = {
    b: [1, 2, 3]
}

data.b.__proto__ = arrayMethods;
```

## 6.5

## 6.4

## 6.3

## 6.2

## 6.1

浏览器能发起的TCP连接数是多少：

Chrome浏览器最多允许对同一个域名Host建立6个TCP连接

:::tip
Most modern browsers allow six connections per domain. Most older browsers allow only two connections per domain
:::

一个TCP连接能支持多少个Http请求？

单个TCP连接在同一时刻只能处理一个请求